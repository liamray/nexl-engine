<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>nexl-client</title>

    <link rel="stylesheet" type="text/css" href="css/style.css"/>
    <link rel="stylesheet" type="text/css" href="components/tabs/tabs.css"/>
    <link rel="stylesheet" type="text/css" href="css/toolbar.css"/>
    <link rel="stylesheet" type="text/css" href="components/file-dialog/file-dialog.css"/>
    <link rel="stylesheet" type="text/css" href="components/key-value-editor/key-value-editor.css"/>
    <link rel="stylesheet" type="text/css" href="jquery/jquery-ui/jquery-ui.css"/>
    <link rel="stylesheet" type="text/css" href="components/jquery-autocomplete/jquery-autocomplete.css"/>
    <link rel="stylesheet" type="text/css" href="components/jstree/themes/default/style.min.css"/>

    <script type="text/javascript" src="jquery/jquery-3.1.1.min.js"></script>
    <script type="text/javascript" src="jquery/jquery-ui/jquery-ui.js"></script>

    <script type="text/javascript" src="util-functions/extended-js-api.js"></script>
    <script type="text/javascript" src="util-functions/utils.js"></script>
    <script type="text/javascript" src="util-functions/nexl-ui.js"></script>
    <script type="text/javascript" src="util-functions/add-action.js"></script>

    <script type="text/javascript" src="components/tabs/tabs.js"></script>
    <script type="text/javascript" src="components/file-dialog/file-dialog.js"></script>
    <script type="text/javascript" src="components/key-value-editor/key-value-editor.js"></script>
    <script type="text/javascript" src="components/jquery-autocomplete/jquery-autocomplete.js"></script>
    <script type="text/javascript" src="components/jquery-resizable/jquery-e-resizable.js"></script>
    <script type="text/javascript" src="components/ace/ace.js" charset="utf-8"></script>
    <script type="text/javascript" src="components/jstree/jstree.min.js" charset="utf-8"></script>
    <script type="text/javascript" src="components/dir-browser/dir-browser.js" charset="utf-8"></script>

    <script type="text/javascript">
        $(function () {
            module.nexlui.init();
        });
    </script>
</head>
<body>

<!-- ------------------------------------------------------------------------------------------------ -->
<!-- buttons panel -->
<!-- ------------------------------------------------------------------------------------------------ -->
<div id="buttons-panel">
    <div class="new-file-button" title="New nexl source file"></div>
    <div class="open-file-button" title="Open existing nexl source file (Ctrl+O)"></div>

    <div class="save-file-button" title="Save nexl source file  (Ctrl+S)" title-baw=""></div>
    <div class="save-file-as-button" title="Save nexl source file as" title-baw=""></div>

    <span class="separator-button"></span>

    <div class="new-remote-button" title="New remote nexl source"></div>
    <span class="separator-button"></span>

    <div class="eval-button" title="Evaluate nexl expression (F9)"></div>

    <span class="separator-button"></span>

    <div class="about-button" title="About nexl-client"></div>
</div>

<!-- ------------------------------------------------------------------------------------------------ -->
<!-- tabs container -->
<!-- ------------------------------------------------------------------------------------------------ -->
<div id="tabs">
    <ul>
    </ul>
</div>


<!-- ------------------------------------------------------------------------------------------------ -->
<!-- external args + output area -->
<!-- ------------------------------------------------------------------------------------------------ -->
<div id="output-area">
    <div id="args">
        <div class="frame">
            <div>External arguments</div>
            <span id="addExternalArg" title="Add key-value pair"></span>
        </div>
        <div id="external-arguments-editor" class="key-value-editor"></div>
    </div>

    <div id="output">
        <div class="frame">
            <div>Output</div>
        </div>
        <textarea readonly></textarea>
    </div>
</div>


<!-- ------------------------------------------------------------------------------------------------ -->
<!-- container for file-dialog, jquery loads it from the template -->
<!-- ------------------------------------------------------------------------------------------------ -->
<div id="file-dialog-container"></div>


<!-- ------------------------------------------------------------------------------------------------ -->
<!-- popup messages container, confirm message container -->
<!-- ------------------------------------------------------------------------------------------------ -->
<div id="popup-message"></div>

<div id="dialog-confirm">
    <p></p>
</div>


<!-- ------------------------------------------------------------------------------------------------ -->
<!-- explore nexl source dialog -->
<!-- ------------------------------------------------------------------------------------------------ -->
<div id="explore-nexl-sources-container">
    <div class="explore-nexl-sources" style="width:100%; height:100%;"></div>
</div>


<!-- ------------------------------------------------------------------------------------------------ -->
<!-- dir browser -->
<!-- ------------------------------------------------------------------------------------------------ -->
<div id="dir-browser-dialog" style="display: none;">
    <div id="dir-browser" style="width:100%; height:100%; overflow-y: auto;"></div>
</div>

<!-- ------------------------------------------------------------------------------------------------ -->
<!-- run server dialog -->
<!-- ------------------------------------------------------------------------------------------------ -->
<div class="run-server-dialog" style="display: none;" title="Run nexl server on this computer">
    <div>
        <label title="Empty dir = ~/nexl-sources">nexl sources directory</label><input type="text" class="dir"><span
            class="browse"></span>
    </div>

    <div>
        <label title="Empty port = use default port">nexl server port</label><input type="text" class="port">
    </div>

    <div>
        <label title="To install nexl server manually write the following in the command line <br/><h4>npm i nexl-server -g</h4>">Do
            not install nexl server</label><input type="checkbox" class="dont-install">
    </div>
</div>

<!-- ------------------------------------------------------------------------------------------------ -->
<!-- choose expression dialog -->
<!-- ------------------------------------------------------------------------------------------------ -->
<div class="choose-expression-dialog" style="display: none;" title="Expression builder">
    <div class="expressions-list-container">
        <label>Available variables</label>
        <div>
            <ul>
            </ul>
        </div>
    </div>

    <div class="expression-fitting">
        <label>nexl expression</label>
        <div class="nexl-expression">${}</div>
        <input type="button" value="Add action" class="add-action-button"/>
        <input type="button" value="Reset actions" class="reset-events-button"/>
    </div>
</div>

<!-- ------------------------------------------------------------------------------------------------ -->
<!-- actions builder dialog -->
<!-- ------------------------------------------------------------------------------------------------ -->
<div id="addActionDialog" style="display: none;" title="Add action">
    <div class="actionsContainer">
        <div class="actionsSelect">
            <label>Action ID</label>
            <select class="actionIds" autocomplete="off">
                <option disabled selected value></option>
                <option aTitle="Object property resolution"
                        example="the ${obj.%s} expression resolves <u>%s</u> property from <u>obj1</u> object">.
                </option>
                <option aTitle="Access array elements by index or make substring"
                        example="the ${arr[ %s ]} expression resolves element(s) from <u>arr</u> array by <u>%s</u> index<br/><br/>The ${str[ %s ]} expression extracts character(s) from <u>str</u> string by <u>%s</u> index<br/><br/>You can specify the following as indexes :<br/> <b>^</b> first element<br/> <b>$</b> last element<br/> positive integer<br/> negative integer ( counts from end )<br/> internal nexl expression<br/><br/>Also you can provide elements range and/or multiple ranges">
                    []
                </option>
                <option aTitle="Function call"
                        example="the ${func( %s )} expression calls a <u>func</u> function with <u>%s</u> argument(s). Argument(s) must be nexl expression(s) separated with comma. Spaces are ignored">
                    ()
                </option>
                <option aTitle=" Default value"
                        example="the ${item@%s} expression will be evaluated to <u>%s</u> value if <u>item</u> is undefined">
                    @
                </option>
                <option ref=".typeCast" aTitle="Typecast">:</option>
                <option ref=".objectOperations" aTitle="Object operations">~</option>
                <option aTitle="Object key reverse resolution"
                        example="the ${obj1&lt;&#8203;%s} expression performs key resolution for <u>obj1</u> object by <u>%s</u> value">
                    &lt;</option>
                <option ref=".arrayOperations" aTitle="Array operations">#</option>
                <option aTitle="Join array elements"
                        example="the ${arr&%s} expression joins all array elements with <u>%s</u>">
                    &
                </option>
                <option ref=".stringOperations" aTitle="String operations">^</option>
                <option aTitle="Eliminate items from array or object"
                        example="the ${objOrArray-%s} expression eliminates a <u>%s</u> item from <u>objOrArray</u> instance">
                    -
                </option>
                <option aTitle="Add items to array or merge objects"
                        example="in the ${objOrArray+%s} expression adds a <u>%s</u> value to the end of <u>objOrArray</u> array or merges a <u>%s</u> object to <u>objOrArray</u> object">
                    +
                </option>
                <option aTitle="Mandatory value validator"
                        example="the ${test*%s} expression throws error with <u>%s</u> error message if the <u>test</u> item is undefined">
                    *
                </option>
                <option ref=".undefinedValueOperations" aTitle="Undefined value operations">!</option>
                <option aTitle="Push current value to function parameters stack"
                        example="the ${%s|Math.round()} expression first pushes a <u>%s</u> value to the stack and then calls a <u>Math.round()</u> function which gets their arguments from that stack">
                    |
                </option>
            </select>
        </div>
        <div class="box1"></div>
        <hr/>

        <div class="customValue">
            <label aTitle="Action ID can be a constant value or nexl expression">Action Value</label>
            <input type="text" aTitle="Start typing action value. Action ID can be a string value or nexl expression"/>
        </div>

        <div class="actionValueContainer">
            <div class="typeCast">
                <label>Action Value</label>
                <select>
                    <option disabled selected value></option>
                    <option aTitle="Casts a primitive to numeric"
                            example="the ${item%s} expression expression casts item's value to <u>numeric</u>">num
                    </option>
                    <option aTitle="Casts a primitive to string"
                            example="the ${item%s} expression expression casts item's value to <u>string</u>">str
                    </option>
                    <option aTitle="Casts a primitive to boolean"
                            example="the ${item%s} expression expression casts item's value to <u>boolean</u>">bool
                    </option>
                    <option aTitle="Converts to null"
                            example="the ${item%s} expression converts item's value to <u>null</u>">null
                    </option>
                    <option aTitle="Converts to undefined"
                            example="the ${item%s} expression converts item's value to <u>undefined</u>">
                        undefined
                    </option>
                </select>
            </div>

            <div class="objectOperations">
                <label>Action Value</label>
                <select>
                    <option disabled selected value></option>
                    <option aTitle="Resolves object key set as array"
                            example="the ${obj~K} expression resolves a key set of <u>obj</u> object as array">
                        K
                    </option>
                    <option aTitle="Resolves object values"
                            example="the ${obj~V} expression resolves all values of <u>obj</u> object as array">
                        V
                    </option>
                    <option aTitle="Converts to object"
                            example="the ${item~O} expression converts <u>item</u> to object">O
                    </option>
                    <option aTitle="Produces XML from object"
                            example="the ${obj~X} expression produces an XML from <u>obj</u> object">X
                    </option>
                    <option aTitle="Produces YAML from object"
                            example="the ${obj~Y} expression produces a YAML from <u>obj</u> object">
                        Y
                    </option>
                    <option aTitle="Produces key-value paris from object"
                            example="the ${obj~P} expression produces a key-value pairs ( property file) from <u>obj</u> object">
                        P
                    </option>
                </select>
            </div>

            <div class="arrayOperations">
                <label>Action Value</label>
                <select>
                    <option disabled selected value></option>
                    <option aTitle="Sorts array ascending"
                            example="the ${arr#S} expression sorts <u>arr</u> array in ascending order">
                        S
                    </option>
                    <option aTitle="Sorts array descending"
                            example="the ${arr#s} expression sorts <u>arr</u> array in descending order">
                        s
                    </option>
                    <option aTitle="Unique value only"
                            example="the ${arr#U} expression makes <u>arr</u> array elements unique ( omitting duplicates )">
                        U
                    </option>
                    <option aTitle="Duplicate values only"
                            example="the ${arr#D} expression leaves only duplicate items in <u>arr</u> array">D
                    </option>
                    <option aTitle="Calculates array length"
                            example="the ${arr#LEN} expression calculates length of <u>arr</u> array">
                        LEN
                    </option>
                    <option aTitle="Converts to array" example="the ${item#A} expression converts <u>item</u> to array">
                        A
                    </option>
                    <option aTitle="Gets first array element or undefined"
                            example="the ${arr#F} expression resolves the first array element if <u>arr</u> array has only one element. Otherwise this expression is evaluated to undefined">
                        F
                    </option>
                </select>
            </div>

            <div class="stringOperations">
                <label>Action Value</label>
                <select>
                    <option disabled selected value></option>
                    <option aTitle="Uppercase"
                            example="the ${str^U} expression converts a <u>str</u> string to uppercase letters">U
                    </option>
                    <option aTitle="Capitalizes first letter"
                            example="the ${str^U1} expression capitalizes a first letter of <u>str</u> string">U1
                    </option>
                    <option aTitle="Lowercase"
                            example="the ${str^L} expression converts a <u>str</u> string to lowercase letters">L
                    </option>
                    <option aTitle="Calculates string length"
                            example="the ${str^LEN} expression calculates length of <u>str</u> string">
                        LEN
                    </option>
                    <option aTitle="Trims a string" example="the ${str^T} expression trims a <u>str</u> string">T
                    </option>
                </select>
            </div>

            <div class="undefinedValueOperations">
                <label>Action Value</label>
                <select>
                    <option disabled selected value></option>
                    <option aTitle="Convert empty string, array or object to undefined"
                            example="the ${item!E} expression converts <u>item</u> to undefined if this item is empty string, empty array or empty object">
                        E
                    </option>
                    <option aTitle="Evaluates expression as undefined"
                            example="the ${expr!U} expression is evaluated to undefined if it points to sub expression(s) and one of those sub expressions are evaluated to undefined">
                        U
                    </option>
                </select>
            </div>
        </div>

        <div class="box2"></div>

        <div class="exampleBox"></div>
    </div>
</div>

<div style="display: none;" id="scratch1">
/*
    nexl source example
    See expressions examples below. Put each expression in "Expression" field to test it and click "Evaluate nexl expression" ( F9 )

    WebSite        -> http://www.nexl-js.com
    GitHub project -> https://github.com/yevgeny-sergeyev/nexl-js
*/

distanceToMoon = 384400;

fruits = ['Mango', 'Banana', 'Orange', 'Annona', 'Grape'];

person = {
    name: 'Alex',
    age: 25,
    country: 'Canada'
};

/*
    ..:: Expressions examples ::..

${person.name}
First resolves person object and then resolves a name property of that object

${fruits#S}
Resolves a fruits array and sorts it

${fruits#S&,}
First sorts fruits array and then joins all elements with comma

${fruits[-1]}
Resolves a second element from the end of fruits array

${person~K}
Resolves a key set of person object as array

${person~V&,}
Resolves all values of person object as array and then joins all array elements with comma

${person~K#s[$]}
Resolves a key set of person object as array, sorts them in descending order, resolves last array element

${person.country[3..$]^U1}
Resolves a country property of person object, substrings it from fourth element to the end and then capitalizes a first letter

${person~X}
${person~Y}
${person~P}
Produces an XML, YAML and key-value pairs ( property file ) from person object

${person&lt;Alex}
Resolves a key of person object by ‘Alex’ string value ( i.e. makes object property reverse resolution ).
The result is array

${person&lt;Alex[0]}
Resolves a key of person object by ‘Alex’ value as array and then resolves a first array element

${person~K+${person~V}&\t}
Joins two arrays. The first array is a key set of a person object, the second array are values of a person object. Finally joins all array elements with tab character

${distanceToMoon~O}
Converts a distanceToMoon primitive number to JavaScript object

${distanceToMoon~O~P}
Converts a distanceToMoon primitive number to JavaScript object and then produces a key-value pair of it

${distanceToMoon~O+${person}}
Converts a distanceToMoon primitive number to JavaScript object and then merges to him person object

${Math.PI}
Resolves a PI property from Math object

${Math.PI|Math.round()}
Resolves a PI property from Math object and pushes it to stack. Calles a Math.round() function which automatically gets a Math.PI argument from the stack

${Math.PI|distanceToMoon|Math.max()}
Pushes a Math.PI to the stack, then pushes a distanceToMoon to the stack. Finally calls a Math.max() function which gets arguments from the stack

*/
</div>

</body>
</html>